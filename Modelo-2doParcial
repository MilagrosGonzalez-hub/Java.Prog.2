SISTEMA DE GESTIÃ“N DE FLOTA VEHICULAR - EMPRESA DE TRANSPORTE "LOGÃSTICA EXPRESS S.A."
 * 
 * Contexto: Este sistema estÃ¡ diseÃ±ado para una empresa de transporte y logÃ­stica que necesita
 * administrar su flota de vehÃ­culos (autos para ejecutivos y camiones para carga).
 * Permite realizar operaciones CRUD para mantener un registro actualizado de todos los vehÃ­culos,
 * controlar mantenimientos, kilometrajes y costos operativos.

import java.util.*;
import java.util.stream.*;

// ==================== EXCEPCIÃ“N PERSONALIZADA ====================
class PatenteInvalidaException extends Exception {
    public PatenteInvalidaException(String mensaje) {
        super(mensaje);
    }
}

// ==================== INTERFAZ ====================
interface Mantenible {
    double calcularCostoMantenimiento();
    String getIdentificador();
}

// ==================== CLASE BASE VEHÃCULO ====================
abstract class Vehiculo implements Mantenible {
    // Atributos privados (encapsulamiento)
    private String marca;
    private String modelo;
    private int anio;
    private String patente;
    private String tipo;
    private double kilometraje;
    
    // Constructor parametrizado
    public Vehiculo(String marca, String modelo, int anio, String patente, String tipo, double kilometraje) {
        this.marca = marca;
        this.modelo = modelo;
        this.anio = anio;
        this.patente = patente.toUpperCase();
        this.tipo = tipo;
        this.kilometraje = kilometraje;
    }
    
    // Getters y Setters
    public String getMarca() { return marca; }
    public void setMarca(String marca) { this.marca = marca; }
    
    public String getModelo() { return modelo; }
    public void setModelo(String modelo) { this.modelo = modelo; }
    
    public int getAnio() { return anio; }
    public void setAnio(int anio) { this.anio = anio; }
    
    public String getPatente() { return patente; }
    public void setPatente(String patente) { this.patente = patente.toUpperCase(); }
    
    public String getTipo() { return tipo; }
    public void setTipo(String tipo) { this.tipo = tipo; }
    
    public double getKilometraje() { return kilometraje; }
    public void setKilometraje(double kilometraje) { this.kilometraje = kilometraje; }
    
    // RedefiniciÃ³n de equals() y hashCode() basados en patente
    @Override
    public boolean equals(Object obj) {
        if (this == obj) return true;
        if (obj == null || getClass() != obj.getClass()) return false;
        Vehiculo vehiculo = (Vehiculo) obj;
        return patente.equalsIgnoreCase(vehiculo.patente);
    }
    
    @Override
    public int hashCode() {
        return Objects.hash(patente.toUpperCase());
    }
    
    // MÃ©todo sobrecargado - versiÃ³n 1
    public void mostrarInfo() {
        System.out.printf("Tipo: %s | Marca: %s | Modelo: %s | AÃ±o: %d | Patente: %s | Km: %.2f%n",
                tipo, marca, modelo, anio, patente, kilometraje);
    }
    
    // MÃ©todo sobrecargado - versiÃ³n 2
    public void mostrarInfo(boolean detallado) {
        if (detallado) {
            System.out.println("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
            System.out.printf("â•‘ INFORMACIÃ“N DETALLADA DEL VEHÃCULO%n");
            System.out.println("â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£");
            System.out.printf("â•‘ Tipo:       %-30s â•‘%n", tipo);
            System.out.printf("â•‘ Marca:      %-30s â•‘%n", marca);
            System.out.printf("â•‘ Modelo:     %-30s â•‘%n", modelo);
            System.out.printf("â•‘ AÃ±o:        %-30d â•‘%n", anio);
            System.out.printf("â•‘ Patente:    %-30s â•‘%n", patente);
            System.out.printf("â•‘ Kilometraje: %-29.2f â•‘%n", kilometraje);
            System.out.printf("â•‘ Costo Mant.: $%-28.2f â•‘%n", calcularCostoMantenimiento());
            System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        } else {
            mostrarInfo();
        }
    }
    
    @Override
    public String getIdentificador() {
        return patente;
    }
    
    // MÃ©todo abstracto que serÃ¡ sobreescrito por subclases
    public abstract double calcularCostoMantenimiento();
}

// ==================== SUBCLASE AUTO ====================
class Auto extends Vehiculo {
    private int numeroPuertas;
    private boolean esAutomatico;
    
    public Auto(String marca, String modelo, int anio, String patente, double kilometraje, 
                int numeroPuertas, boolean esAutomatico) {
        super(marca, modelo, anio, patente, "Auto", kilometraje);
        this.numeroPuertas = numeroPuertas;
        this.esAutomatico = esAutomatico;
    }
    
    public int getNumeroPuertas() { return numeroPuertas; }
    public void setNumeroPuertas(int numeroPuertas) { this.numeroPuertas = numeroPuertas; }
    
    public boolean isEsAutomatico() { return esAutomatico; }
    public void setEsAutomatico(boolean esAutomatico) { this.esAutomatico = esAutomatico; }
    
    // Sobreescritura del mÃ©todo abstracto
    @Override
    public double calcularCostoMantenimiento() {
        double costoBase = 5000.0;
        double costoKm = getKilometraje() * 0.5;
        double costoTransmision = esAutomatico ? 2000.0 : 1000.0;
        return costoBase + costoKm + costoTransmision;
    }
}

// ==================== SUBCLASE CAMION ====================
class Camion extends Vehiculo {
    private double capacidadCarga; // en toneladas
    private int numeroEjes;
    
    public Camion(String marca, String modelo, int anio, String patente, double kilometraje,
                  double capacidadCarga, int numeroEjes) {
        super(marca, modelo, anio, patente, "CamiÃ³n", kilometraje);
        this.capacidadCarga = capacidadCarga;
        this.numeroEjes = numeroEjes;
    }
    
    public double getCapacidadCarga() { return capacidadCarga; }
    public void setCapacidadCarga(double capacidadCarga) { this.capacidadCarga = capacidadCarga; }
    
    public int getNumeroEjes() { return numeroEjes; }
    public void setNumeroEjes(int numeroEjes) { this.numeroEjes = numeroEjes; }
    
    // Sobreescritura del mÃ©todo abstracto
    @Override
    public double calcularCostoMantenimiento() {
        double costoBase = 15000.0;
        double costoKm = getKilometraje() * 1.2;
        double costoCarga = capacidadCarga * 1000;
        double costoEjes = numeroEjes * 800;
        return costoBase + costoKm + costoCarga + costoEjes;
    }
}

// ==================== CLASE PRINCIPAL ====================
public class SistemaGestionVehiculos {
    // Variable global - ArrayList principal para almacenar vehÃ­culos
    private static ArrayList<Vehiculo> flota = new ArrayList<>();
    private static Scanner scanner = new Scanner(System.in);
    
    public static void main(String[] args) {
        cargarDatosPrueba(); // Carga datos iniciales para testing
        
        int opcion;
        
        do {
            mostrarMenu();
            opcion = leerOpcion();
            
            switch (opcion) {
                case 1:
                    crearVehiculo();
                    break;
                case 2:
                    listarVehiculos();
                    break;
                case 3:
                    buscarVehiculo();
                    break;
                case 4:
                    actualizarVehiculo();
                    break;
                case 5:
                    eliminarVehiculo();
                    break;
                case 6:
                    buscarRecursivo();
                    break;
                case 7:
                    filtrarVehiculos();
                    break;
                case 8:
                    calcularCostosMantenimiento();
                    break;
                case 9:
                    System.out.println("\nÂ¡Gracias por usar el Sistema de GestiÃ³n de Flota!");
                    System.out.println("Saliendo del sistema...");
                    break;
                default:
                    System.out.println("\nâŒ OpciÃ³n invÃ¡lida. Intente nuevamente.");
            }
            
            if (opcion != 9) {
                esperarEnter();
            }
            
        } while (opcion != 9);
        
        scanner.close();
    }
    
    // ==================== MÃ‰TODO 1: CREAR VEHÃCULO ====================
    private static void crearVehiculo() {
        System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘     REGISTRAR NUEVO VEHÃCULO          â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        
        try {
            System.out.println("\nSeleccione el tipo de vehÃ­culo:");
            System.out.println("1. Auto");
            System.out.println("2. CamiÃ³n");
            System.out.print("OpciÃ³n: ");
            int tipo = scanner.nextInt();
            scanner.nextLine(); // Limpiar buffer
            
            if (tipo != 1 && tipo != 2) {
                System.out.println("âŒ Tipo de vehÃ­culo invÃ¡lido.");
                return;
            }
            
            System.out.print("Marca: ");
            String marca = scanner.nextLine();
            
            System.out.print("Modelo: ");
            String modelo = scanner.nextLine();
            
            System.out.print("AÃ±o: ");
            int anio = scanner.nextInt();
            scanner.nextLine();
            
            System.out.print("Patente (ej: ABC123): ");
            String patente = scanner.nextLine();
            
            // Validar patente
            validarPatente(patente);
            
            System.out.print("Kilometraje: ");
            double kilometraje = scanner.nextDouble();
            scanner.nextLine();
            
            Vehiculo nuevoVehiculo = null;
            
            if (tipo == 1) {
                System.out.print("NÃºmero de puertas: ");
                int puertas = scanner.nextInt();
                scanner.nextLine();
                
                System.out.print("Â¿Es automÃ¡tico? (S/N): ");
                String respuesta = scanner.nextLine();
                boolean automatico = respuesta.equalsIgnoreCase("S");
                
                nuevoVehiculo = new Auto(marca, modelo, anio, patente, kilometraje, puertas, automatico);
            } else if (tipo == 2) {
                System.out.print("Capacidad de carga (toneladas): ");
                double capacidad = scanner.nextDouble();
                
                System.out.print("NÃºmero de ejes: ");
                int ejes = scanner.nextInt();
                scanner.nextLine();
                
                nuevoVehiculo = new Camion(marca, modelo, anio, patente, kilometraje, capacidad, ejes);
            }
            
            // Verificar si ya existe
            if (flota.contains(nuevoVehiculo)) {
                System.out.println("\nâŒ Ya existe un vehÃ­culo con esa patente.");
            } else {
                flota.add(nuevoVehiculo);
                System.out.println("\nâœ… VehÃ­culo registrado exitosamente.");
            }
            
        } catch (PatenteInvalidaException e) {
            System.out.println("\nâŒ Error: " + e.getMessage());
        } catch (InputMismatchException e) {
            System.out.println("\nâŒ Error: Entrada invÃ¡lida.");
            scanner.nextLine(); // Limpiar buffer
        } catch (Exception e) {
            System.out.println("\nâŒ Error inesperado: " + e.getMessage());
        } finally {
            System.out.println("OperaciÃ³n de registro finalizada.");
        }
    }
    
    // ==================== MÃ‰TODO 2: LISTAR VEHÃCULOS ====================
    private static void listarVehiculos() {
        System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘     LISTADO DE VEHÃCULOS              â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        
        if (flota.isEmpty()) {
            System.out.println("\nâš ï¸  No hay vehÃ­culos registrados.");
            return;
        }
        
        System.out.printf("%nTotal de vehÃ­culos: %d%n%n", flota.size());
        
        // Uso de lambda con forEach
        int[] contador = {1};
        flota.forEach(vehiculo -> {
            System.out.printf("%d. ", contador[0]++);
            vehiculo.mostrarInfo();
        });
    }
    
    // ==================== MÃ‰TODO 3: BUSCAR VEHÃCULO ====================
    private static void buscarVehiculo() {
        System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘     BUSCAR VEHÃCULO POR PATENTE       â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        
        System.out.print("\nIngrese la patente: ");
        String patente = scanner.nextLine().toUpperCase();
        
        // Uso de lambda con filter y findFirst
        Optional<Vehiculo> resultado = flota.stream()
            .filter(v -> v.getPatente().equalsIgnoreCase(patente))
            .findFirst();
        
        if (resultado.isPresent()) {
            System.out.println("\nâœ… VehÃ­culo encontrado:");
            resultado.get().mostrarInfo(true);
        } else {
            System.out.println("\nâŒ No se encontrÃ³ ningÃºn vehÃ­culo con esa patente.");
        }
    }
    
    // ==================== MÃ‰TODO 4: ACTUALIZAR VEHÃCULO (PASO POR REFERENCIA) ====================
    private static void actualizarVehiculo() {
        System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘     ACTUALIZAR VEHÃCULO               â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        
        System.out.print("\nIngrese la patente del vehÃ­culo: ");
        String patente = scanner.nextLine().toUpperCase();
        
        Optional<Vehiculo> resultado = flota.stream()
            .filter(v -> v.getPatente().equalsIgnoreCase(patente))
            .findFirst();
        
        if (resultado.isPresent()) {
            Vehiculo vehiculo = resultado.get();
            System.out.println("\nVehÃ­culo actual:");
            vehiculo.mostrarInfo();
            
            // DemostraciÃ³n de paso por referencia: modificamos el objeto directamente
            modificarVehiculo(vehiculo);
            
            System.out.println("\nâœ… VehÃ­culo actualizado correctamente.");
            System.out.println("\nVehÃ­culo modificado:");
            vehiculo.mostrarInfo();
        } else {
            System.out.println("\nâŒ No se encontrÃ³ el vehÃ­culo.");
        }
    }
    
    // MÃ©todo que demuestra paso por referencia
    private static void modificarVehiculo(Vehiculo v) {
        System.out.println("\nÂ¿QuÃ© desea actualizar?");
        System.out.println("1. Kilometraje");
        System.out.println("2. Marca");
        System.out.println("3. Modelo");
        System.out.print("OpciÃ³n: ");
        int opcion = scanner.nextInt();
        scanner.nextLine();
        
        switch (opcion) {
            case 1:
                System.out.print("Nuevo kilometraje: ");
                double km = scanner.nextDouble();
                scanner.nextLine();
                v.setKilometraje(km);
                break;
            case 2:
                System.out.print("Nueva marca: ");
                String marca = scanner.nextLine();
                v.setMarca(marca);
                break;
            case 3:
                System.out.print("Nuevo modelo: ");
                String modelo = scanner.nextLine();
                v.setModelo(modelo);
                break;
            default:
                System.out.println("OpciÃ³n invÃ¡lida.");
        }
    }
    
    // ==================== MÃ‰TODO 5: ELIMINAR VEHÃCULO ====================
    private static void eliminarVehiculo() {
        System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘     ELIMINAR VEHÃCULO                 â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        
        System.out.print("\nIngrese la patente del vehÃ­culo: ");
        String patente = scanner.nextLine().toUpperCase();
        
        // Uso de lambda con removeIf
        boolean eliminado = flota.removeIf(v -> v.getPatente().equalsIgnoreCase(patente));
        
        if (eliminado) {
            System.out.println("\nâœ… VehÃ­culo eliminado exitosamente.");
        } else {
            System.out.println("\nâŒ No se encontrÃ³ el vehÃ­culo.");
        }
    }
    
    // ==================== MÃ‰TODO RECURSIVO: BUSCAR VEHÃCULO ====================
    private static void buscarRecursivo() {
        System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘     BÃšSQUEDA RECURSIVA                â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        
        System.out.print("\nIngrese la patente: ");
        String patente = scanner.nextLine().toUpperCase();
        
        Vehiculo resultado = buscarVehiculoRecursivo(flota, patente, 0);
        
        if (resultado != null) {
            System.out.println("\nâœ… VehÃ­culo encontrado (bÃºsqueda recursiva):");
            resultado.mostrarInfo(true);
        } else {
            System.out.println("\nâŒ No se encontrÃ³ el vehÃ­culo.");
        }
    }
    
    // FunciÃ³n recursiva para buscar vehÃ­culo
    private static Vehiculo buscarVehiculoRecursivo(ArrayList<Vehiculo> lista, String patente, int indice) {
        // Caso base: llegamos al final de la lista
        if (indice >= lista.size()) {
            return null;
        }
        
        // Caso base: encontramos el vehÃ­culo
        if (lista.get(indice).getPatente().equalsIgnoreCase(patente)) {
            return lista.get(indice);
        }
        
        // Caso recursivo: seguir buscando
        return buscarVehiculoRecursivo(lista, patente, indice + 1);
    }
    
    // ==================== MÃ‰TODO ADICIONAL: FILTRAR VEHÃCULOS ====================
    private static void filtrarVehiculos() {
        System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘     FILTRAR VEHÃCULOS                 â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        
        System.out.println("\n1. Por tipo");
        System.out.println("2. Por aÃ±o mayor a...");
        System.out.println("3. Por kilometraje menor a...");
        System.out.print("OpciÃ³n: ");
        int opcion = scanner.nextInt();
        scanner.nextLine();
        
        List<Vehiculo> filtrados = null;
        
        // Uso de if-else if-else
        if (opcion == 1) {
            System.out.print("Tipo (Auto/CamiÃ³n): ");
            String tipo = scanner.nextLine();
            // Uso de lambda con filter
            filtrados = flota.stream()
                .filter(v -> v.getTipo().equalsIgnoreCase(tipo))
                .collect(Collectors.toList());
        } else if (opcion == 2) {
            System.out.print("AÃ±o mÃ­nimo: ");
            int anio = scanner.nextInt();
            scanner.nextLine();
            filtrados = flota.stream()
                .filter(v -> v.getAnio() > anio)
                .collect(Collectors.toList());
        } else if (opcion == 3) {
            System.out.print("Kilometraje mÃ¡ximo: ");
            double km = scanner.nextDouble();
            scanner.nextLine();
            filtrados = flota.stream()
                .filter(v -> v.getKilometraje() < km)
                .collect(Collectors.toList());
        } else {
            System.out.println("OpciÃ³n invÃ¡lida.");
            return;
        }
        
        if (filtrados != null && !filtrados.isEmpty()) {
            System.out.printf("%nâœ… Se encontraron %d vehÃ­culo(s):%n%n", filtrados.size());
            
            // Uso de for mejorado
            for (Vehiculo v : filtrados) {
                v.mostrarInfo();
            }
        } else {
            System.out.println("\nâš ï¸  No se encontraron vehÃ­culos con ese criterio.");
        }
    }
    
    // ==================== MÃ‰TODO ADICIONAL: CALCULAR COSTOS ====================
    private static void calcularCostosMantenimiento() {
        System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘   COSTOS DE MANTENIMIENTO             â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        
        if (flota.isEmpty()) {
            System.out.println("\nâš ï¸  No hay vehÃ­culos registrados.");
            return;
        }
        
        double costoTotal = 0;
        int contador = 0;
        
        // Uso de while con break y continue
        while (contador < flota.size()) {
            Vehiculo v = flota.get(contador);
            
            // Si el vehÃ­culo tiene menos de 10000 km, lo saltamos (continue)
            if (v.getKilometraje() < 10000) {
                contador++;
                continue;
            }
            
            double costo = v.calcularCostoMantenimiento();
            System.out.printf("%s %s (%s): $%.2f%n", 
                v.getTipo(), v.getMarca(), v.getPatente(), costo);
            costoTotal += costo;
            
            contador++;
            
            // Si llegamos a 10 vehÃ­culos, salimos (break)
            if (contador >= 10) {
                System.out.println("\n(Mostrando solo los primeros 10 vehÃ­culos)");
                break;
            }
        }
        
        System.out.printf("%nğŸ’° Costo total estimado: $%.2f%n", costoTotal);
        
        // Uso de lambda con anyMatch
        boolean hayVehiculosCostosos = flota.stream()
            .anyMatch(v -> v.calcularCostoMantenimiento() > 50000);
        
        if (hayVehiculosCostosos) {
            System.out.println("âš ï¸  Hay vehÃ­culos con costos de mantenimiento superiores a $50,000");
        }
    }
    
    // ==================== MÃ‰TODOS AUXILIARES ====================
    private static void mostrarMenu() {
        System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘   SISTEMA DE GESTIÃ“N DE FLOTA         â•‘");
        System.out.println("â•‘   LogÃ­stica Express S.A.              â•‘");
        System.out.println("â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£");
        System.out.println("â•‘ 1. Registrar nuevo vehÃ­culo           â•‘");
        System.out.println("â•‘ 2. Listar todos los vehÃ­culos         â•‘");
        System.out.println("â•‘ 3. Buscar vehÃ­culo por patente        â•‘");
        System.out.println("â•‘ 4. Actualizar vehÃ­culo                â•‘");
        System.out.println("â•‘ 5. Eliminar vehÃ­culo                  â•‘");
        System.out.println("â•‘ 6. BÃºsqueda recursiva                 â•‘");
        System.out.println("â•‘ 7. Filtrar vehÃ­culos                  â•‘");
        System.out.println("â•‘ 8. Calcular costos de mantenimiento   â•‘");
        System.out.println("â•‘ 9. Salir                              â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        System.out.print("Seleccione una opciÃ³n: ");
    }
    
    private static int leerOpcion() {
        int opcion = -1;
        
        // Uso de do-while
        do {
            try {
                opcion = scanner.nextInt();
                scanner.nextLine(); // Limpiar buffer
                break;
            } catch (InputMismatchException e) {
                System.out.print("âŒ Entrada invÃ¡lida. Ingrese un nÃºmero: ");
                scanner.nextLine();
            }
        } while (true);
        
        return opcion;
    }
    
    private static void validarPatente(String patente) throws PatenteInvalidaException {
        // Uso de contains, length
        if (patente == null || patente.length() < 6 || patente.length() > 7) {
            throw new PatenteInvalidaException("La patente debe tener entre 6 y 7 caracteres.");
        }
        
        // Uso de substring para validar formato (3 letras + 3 nÃºmeros o formato nuevo)
        String letras = patente.substring(0, 3);
        if (!letras.matches("[A-Za-z]+")) {
            throw new PatenteInvalidaException("Los primeros 3 caracteres deben ser letras.");
        }
    }
    
    private static void esperarEnter() {
        System.out.print("\nPresione ENTER para continuar...");
        scanner.nextLine();
    }
    
    private static void cargarDatosPrueba() {
        flota.add(new Auto("Toyota", "Corolla", 2020, "ABC123", 45000, 4, true));
        flota.add(new Auto("Ford", "Focus", 2019, "DEF456", 38000, 4, false));
        flota.add(new Camion("Mercedes-Benz", "Actros", 2021, "GHI789", 120000, 25.5, 3));
        flota.add(new Camion("Scania", "R450", 2022, "JKL012", 85000, 30.0, 4));
        flota.add(new Auto("Honda", "Civic", 2023, "MNO345", 15000, 4, true));
    }
}
